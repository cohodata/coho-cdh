<?xml version="1.0"?>
<!--
  Copyright (c) 2016 Coho Data Inc.
  The subject matter distributed under this license is or is based on
  information and material generated by Coho Data Inc. It may only be
  acquired, used, modified and distributed under the terms of the Coho
  Data Compute Cluster License v1.0.  Except as permitted in the Coho
  Data Compute Cluster License v1.0, all other rights are reserved in
  any copyright or other similar rights which may exist. Execution of
  software distributed under this Coho Data Compute Cluster License
  v1.0 may cause you to acquire third-party software (as described in
  the accompanying documentation) and you agree (a) to comply with the
  applicable licenses thereunder and (b) that Coho is not responsible
  in any way for your compliance or non-compliance with the applicable
  third-party licenses or the consequences of your being subject to
  said licenses or your compliance or non-compliance.
-->
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>

  <property>
    <name>yarn.resourcemanager.address</name>
    <value>resourcemanager:8032</value>
  </property>
  <property>
    <name>yarn.resourcemanager.scheduler.address</name>
    <value>resourcemanager:8030</value>
  </property>
  <property>
    <name>yarn.resourcemanager.resource-tracker.address</name>
    <value>resourcemanager:8031</value>
  </property>
  <property>
    <name>yarn.resourcemanager.admin.address</name>
    <value>resourcemanager:8033</value>
  </property>
  <property>
    <name>yarn.resourcemanager.webapp.address</name>
    <value>resourcemanager:8088</value>
  </property>
  <property>
    <name>yarn.nodemanager.localizer.address</name>
    <value>0.0.0.0:8040</value>
  </property>
  <property>
    <name>yarn.nodemanager.address</name>
    <value>0.0.0.0:8041</value>
  </property>
  <property>
    <name>yarn.nodemanager.webapp.address</name>
    <value>0.0.0.0:8042</value>
  </property>

  <property>
    <name>yarn.nodemanager.aux-services</name>
    <value>mapreduce_shuffle</value>
  </property>

  <property>
    <name>yarn.nodemanager.aux-services.mapreduce_shuffle.class</name>
    <value>org.apache.hadoop.mapred.ShuffleHandler</value>
  </property>

  <property>
    <name>yarn.log-aggregation-enable</name>
    <value>true</value>
  </property>

  <property>
    <name>yarn.dispatcher.exit-on-error</name>
    <value>true</value>
  </property>
  <property>
    <description>List of directories to store localized files in.</description>
    <name>yarn.nodemanager.local-dirs</name>
    <value>LOCAL_DIR_OVERRIDE/${user.name}/nm-local-dir</value>
  </property>

  <property>
    <description>Where to store container logs.</description>
    <name>yarn.nodemanager.log-dirs</name>
    <value>/var/log/hadoop-yarn/containers</value>
  </property>

  <property>
    <description>Where to aggregate logs to.</description>
    <name>yarn.nodemanager.remote-app-log-dir</name>
    <value>/var/log/hadoop-yarn/apps</value>
  </property>

  <!-- NodeManager resources.  See CIO-11467 -->
  <property>
    <description>Amount of physical memory, in MB, that can be allocated for containers.</description>
    <name>yarn.nodemanager.resource.memory-mb</name>
    <value>30720</value>
  </property>

  <!-- Our supermicros have 24 cores -->
  <property>
    <description>Number of CPU cores that can be allocated for containers.</description>
    <name>yarn.nodemanager.resource.cpu-vcores</name>
    <value>8</value>
  </property>

  <!-- Container request resource limits -->
  <property>
    <description>The minimum memory allocation for every container request at the RM</description>
    <name>yarn.scheduler.minimum-allocation-mb</name>
    <value>2560</value>
  </property>
  <property>
  <description>The maximim memory allocation for every container request at the RM</description>
    <name>yarn.scheduler.maximum-allocation-mb</name>
    <value>30720</value>
  </property>
  <property>
    <description>The minimum CPU core allocation for every container request at the RM</description>
    <name>yarn.scheduler.minimum-allocation-vcores</name>
    <value>1</value>
  </property>
  <property>
    <description>The maximium CPU core allocation for every container request at the RM</description>
    <name>yarn.scheduler.maximum-allocation-vcores</name>
    <value>8</value>
  </property>

  <property>
    <description>Classpath for typical applications.</description>
     <name>yarn.application.classpath</name>
     <value>
        $HADOOP_CONF_DIR,
        $HADOOP_COMMON_HOME/*,$HADOOP_COMMON_HOME/lib/*,
        $HADOOP_HDFS_HOME/*,$HADOOP_HDFS_HOME/lib/*,
        $HADOOP_MAPRED_HOME/*,$HADOOP_MAPRED_HOME/lib/*,
        $HADOOP_YARN_HOME/*,$HADOOP_YARN_HOME/lib/*
     </value>
  </property>
</configuration>
