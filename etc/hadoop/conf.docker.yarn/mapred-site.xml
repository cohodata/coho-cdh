<?xml version="1.0"?>
<!--
  Copyright (c) 2016 Coho Data Inc.
  The subject matter distributed under this license is or is based on
  information and material generated by Coho Data Inc. It may only be
  acquired, used, modified and distributed under the terms of the Coho
  Data Compute Cluster License v1.0.  Except as permitted in the Coho
  Data Compute Cluster License v1.0, all other rights are reserved in
  any copyright or other similar rights which may exist. Execution of
  software distributed under this Coho Data Compute Cluster License
  v1.0 may cause you to acquire third-party software (as described in
  the accompanying documentation) and you agree (a) to comply with the
  applicable licenses thereunder and (b) that Coho is not responsible
  in any way for your compliance or non-compliance with the applicable
  third-party licenses or the consequences of your being subject to
  said licenses or your compliance or non-compliance.
-->
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>resourcemanager:8021</value>
  </property>

 <property>
    <name>mapred.job.tracker.http.address</name>
    <value>resourcemanager:50030</value>
  </property>

  <property>
    <name>mapreduce.framework.name</name>
    <value>yarn</value>
  </property>

  <property>
    <name>mapreduce.jobhistory.address</name>
    <value>historyserver:10020</value>
  </property>
  <property>
    <name>mapreduce.jobhistory.webapp.address</name>
    <value>historyserver:19888</value>
  </property>

  <!-- Restrict the ports used by the application master to a specific range -->
  <!-- that can be exposed by the container. -->
  <property>
    <name>yarn.app.mapreduce.am.job.client.port-range</name>
    <value>40000-40010</value>
  </property>

  <property>
    <name>mapreduce.task.tmp.dir</name>
    <value>/var/lib/hadoop-mapreduce/cache/${user.name}/tasks</value>
    <description>To set the value of tmp directory for map and reduce tasks.</description>
  </property>

  <property>
    <name>mapreduce.job.reduce.slowstart.completedmaps</name>
    <value>0.99</value>
    <description>Fraction of the number of maps in the job which should be complete before reduces are scheduled.
    </description>
  </property>

  <property>
    <name>mapreduce.map.maxattempts</name>
    <value>10</value>
    <description>The maximum number of attempts per map task before failing the job (default 4).
    </description>
  </property>
  <property>
    <name>mapreduce.reduce.maxattempts</name>
    <value>10</value>
    <description>The maximum number of attempts per reduce task before failing the job (default 4).
    </description>
  </property>

  <!-- MapReduce resource configuration.  See CIO-11467 -->
  <property>
    <name>mapreduce.map.memory.mb</name>
    <value>2560</value>
    <description>Limit on the memory consumed by a mapper (prevents YARN kill due to memory consumption).
    </description>
  </property>
  <property>
    <name>mapreduce.map.java.opts</name>
    <value>-Xmx2048m</value>
    <description>Heap size for mapper VMs (prevents Java OOM).</description>
  </property>
  <property>
    <name>mapreduce.reduce.memory.mb</name>
    <value>2560</value>
    <description>Limit on the memory consumed by a reducer (prevents YARN kill due to memory consumption).
    </description>
  </property>
  <property>
    <name>mapreduce.reduce.java.opts</name>
    <value>-Xmx2048m</value>
    <description>Heap size for reducer VMs (prevents Java OOM).</description>
  </property>
  <property>
    <name>yarn.app.mapreduce.am.resource.mb</name>
    <value>2560</value>
    <description>The amount of memory the MR AppMaster needs.</description>
  </property>
  <property>
    <name>yarn.app.mapreduce.am.command-opts</name>
    <value>-Xmx2048m</value>
    <description>Java opts for the MR App Master processes.</description>
  </property>
  <property>
    <name>mapreduce.task.io.sort.mb</name>
    <value>1024</value>
    <description>The total amount of buffer memory to use while sorting files, in megabytes (prevents spilling to local disk).
    </description>
  </property>
  <property>
    <name>mapreduce.map.speculative</name>
    <value>false</value>
    <description> If true, then multiple instances of some map tasks may be executed in parallel. </description>
  </property>
  <property>
    <name>mapreduce.reduce.speculative</name>
    <value>false</value>
    <description> If true, then multiple instances of some reduce tasks may be executed in parallel. </description>
  </property>

</configuration>
